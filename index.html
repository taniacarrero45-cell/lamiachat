<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ARENA LIVE - L'ORIGINALE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gun/0.2020.1239/gun.min.js"></script>
    <style>
        * { box-sizing: border-box; }
        body { margin: 0; background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; display: flex; height: 100vh; }
        
        /* Layout */
        #pannello-utenti { width: 200px; border-right: 2px solid #ff00ff; background: #050505; display: flex; flex-direction: column; }
        #area-centrale { flex: 1; display: flex; flex-direction: column; }
        #regia-destra { width: 350px; border-left: 2px solid #00f2ff; background: #050505; padding: 15px; display: flex; flex-direction: column; gap: 15px; }

        /* Stili */
        .titolo { padding: 15px; color: #ff00ff; text-align: center; border-bottom: 1px solid #222; font-weight: bold; }
        #box-chat { flex: 1; overflow-y: auto; padding: 20px; background: #000; }
        .messaggio { margin-bottom: 12px; padding: 10px; background: #111; border-radius: 10px; border-left: 4px solid #ff00ff; }
        .input-zona { padding: 20px; background: #0a0a0a; display: flex; gap: 10px; border-top: 1px solid #222; }
        input { flex: 1; padding: 15px; background: #111; border: 1px solid #444; color: #fff; border-radius: 8px; }
        button { background: #ff00ff; color: #fff; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }

        /* Media */
        .video-player { width: 100%; aspect-ratio: 16/9; background: #000; border: 1px solid #333; }
        .modulo-gioco { background: #111; padding: 15px; border-radius: 12px; text-align: center; border: 1px solid #222; }
        .btn-webcam { background: #00f2ff; color: #000; width: 100%; padding: 12px; border-radius: 8px; font-weight: bold; margin-top: 10px; }
        
        #overlay-login { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>

<div id="overlay-login">
    <div style="border: 2px solid #ff00ff; padding: 40px; border-radius: 20px; text-align: center; background: #0a0a0a;">
        <h1 style="color:#00f2ff">ARENA ACCESSO</h1>
        <input type="text" id="nickname" placeholder="Nickname..."><br><br>
        <button onclick="entra()" style="width:100%">ENTRA ORA</button>
    </div>
</div>

<div id="pannello-utenti">
    <div class="titolo">ONLINE</div>
    <div id="u-lista" style="padding:10px;"></div>
</div>

<div id="area-centrale">
    <div id="box-chat"></div>
    <div class="input-zona">
        <input type="text" id="msg-in" placeholder="Scrivi un messaggio..." onkeypress="if(event.key==='Enter') invia()">
        <button onclick="invia()">INVIA</button>
    </div>
</div>

<div id="regia-destra">
    <div class="titolo" style="color:#00f2ff">REGIA MEDIA</div>
    <iframe class="video-player" src="https://www.youtube.com/embed/jfKfPfyJRdk"></iframe>
    
    <div class="modulo-gioco">
        <h4 style="margin:0; color:gold">ARENA QUIZ</h4>
        <p style="font-size:12px; color:#666">Sfida i tuoi amici!</p>
        <button onclick="alert('Dadi lanciati!')" style="background:#333; color:#fff; width:100%">GIOCA ROUND</button>
    </div>

    <button class="btn-webcam" onclick="alert('Attivazione Camera...')">üé• ATTIVA WEBCAM</button>
</div>

<script>
    const gun = Gun(['https://gun-manhattan.herokuapp.com/gun']);
    const db = gun.get('arena_u_2026_reale');
    let mioNick = "";

    function entra() {
        mioNick = document.getElementById('nickname').value.trim();
        if(!mioNick) return;
        document.getElementById('overlay-login').style.display = 'none';
        db.get('utenti').get(mioNick).put({nome: mioNick});
    }

    function invia() {
        let t = document.getElementById('msg-in').value;
        if(!t) return;
        db.get('messaggi').set({u: mioNick, t: t});
        document.getElementById('msg-in').value = "";
    }

    db.get('messaggi').map().once(d => {
        if(!d) return;
        let m = document.createElement('div');
        m.className = 'messaggio';
        m.innerHTML = `<b style="color:#00f2ff">${d.u}:</b> ${d.t}`;
        document.getElementById('box-chat').appendChild(m);
        document.getElementById('box-chat').scrollTop = 9999;
    });

    db.get('utenti').map().on((d, id) => {
        if(!d || document.getElementById('u-'+id)) return;
        let u = document.createElement('div');
        u.id = 'u-'+id;
        u.innerText = "‚óè " + id;
        u.style.padding = "8px";
        u.style.color = "#00f2ff";
        document.getElementById('u-lista').appendChild(u);
    });
</script>
</body>
</html>
