<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ARENA LIVE 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gun/0.2020.1239/gun.min.js"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        #sx { width: 180px; border-right: 2px solid #ff00ff; background: #050505; display: flex; flex-direction: column; }
        #centro { flex: 1; display: flex; flex-direction: column; border-right: 2px solid #00f2ff; }
        #dx { width: 320px; background: #050505; padding: 10px; display: flex; flex-direction: column; gap: 10px; }
        #chat { flex: 1; overflow-y: auto; padding: 20px; }
        .msg { margin-bottom: 10px; padding: 10px; background: #111; border-radius: 5px; border-left: 3px solid #ff00ff; }
        .bar { padding: 15px; background: #111; display: flex; gap: 10px; }
        input { flex: 1; padding: 12px; background: #000; color: #fff; border: 1px solid #ff00ff; border-radius: 5px; outline: none; }
        button { padding: 10px 15px; background: #ff00ff; color: #fff; border: none; cursor: pointer; font-weight: bold; border-radius: 5px; }
        iframe { width: 100%; height: 180px; border: 1px solid #00f2ff; border-radius: 5px; }
        #login { position: fixed; inset: 0; background: #000; z-index: 1000; display: flex; align-items: center; justify-content: center; }
        .box-l { border: 2px solid #00f2ff; padding: 40px; border-radius: 20px; text-align: center; background: #0a0a0a; }
        .u-item { padding: 8px; color: #00f2ff; border-bottom: 1px solid #222; cursor: pointer; }
    </style>
</head>
<body>
    <div id="login">
        <div class="box-l">
            <h1 style="color:#00f2ff; margin-top:0;">ARENA LIVE</h1>
            <input type="text" id="nick" placeholder="Nickname..."><br><br>
            <button onclick="entra()">ENTRA NELL'ARENA</button>
        </div>
    </div>
    <div id="sx"><h4 style="text-align:center; color:#ff00ff;">ONLINE</h4><div id="u-list"></div></div>
    <div id="centro">
        <div id="chat"></div>
        <div class="bar"><input type="text" id="input" placeholder="Messaggio..."><button onclick="send()">INVIA</button></div>
    </div>
    <div id="dx">
        <h4 style="color:#00f2ff; margin:0; text-align:center;">ARENA TV</h4>
        <iframe src="https://www.youtube.com/embed/jfKfPfyJRdk" frameborder="0"></iframe>
        <div style="background:#111; padding:15px; border-radius:10px; text-align:center; border: 1px dashed #444;">
            <p style="color:gold; margin:0 0 10px 0;">GIOCO DEI DADI</p>
            <button onclick="alert('Lancio dadi... üé≤')" style="background:#333; font-size:12px;">GIOCA</button>
        </div>
        <button onclick="alert('Webcam in arrivo!')" style="background:#ff0055; width:100%; color:white; border-radius:5px; padding:10px;">üé• WEBCAM ON/OFF</button>
    </div>
    <script>
        const gun = Gun(['https://gun-manhattan.herokuapp.com/gun']);
        const db = gun.get('arena_final_2026_reale');
        let mioNick = "";
        function entra() {
            mioNick = document.getElementById('nick').value;
            if(mioNick) { document.getElementById('login').style.display='none'; db.get('u').get(mioNick).put({n: mioNick}); }
        }
        function send() {
            let t = document.getElementById('input').value;
            if(t) db.get('m').set({u: mioNick, t: t});
            document.getElementById('input').value = "";
        }
        db.get('m').map().once(d => {
            let m = document.createElement('div'); m.className = 'msg';
            m.innerHTML = `<b style="color:#00f2ff">${d.u}:</b> ${d.t}`;
            document.getElementById('chat').appendChild(m);
            document.getElementById('chat').scrollTop = 9999;
        });
        db.get('u').map().on((d, id) => {
            if(!document.getElementById('u-'+id)) {
                let u = document.createElement('div'); u.id = 'u-'+id; u.className='u-item'; u.innerText = "‚óè " + id;
                document.getElementById('u-list').appendChild(u);
            }
        });
    </script>
</body>
</html>
